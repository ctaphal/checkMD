import requests

# Function to detect skin diseases using the "oh-no" API
def detect_skin_disease(image_path):
    oh_no_api_url = "https://api.oh-no.xyz/detect"
    
    # Load the image
    with open(image_path, "rb") as image_file:
        files = {"image": image_file}
        response = requests.post(oh_no_api_url, files=files)
    
    if response.status_code == 200:
        results = response.json()
        return results
    else:
        return None

# Function to get recommendations using the "rapidapi.com" API
def get_skin_disease_recommendations(disease_name):
    rapidapi_url = "detect-skin-disease.p.rapidapi.com"
    headers = {
        "X-RapidAPI-Host": "detect-skin-disease.p.rapidapi.com",
        "X-RapidAPI-Key": "a6a396186fmsh9018f254b745032p1ef2eajsnbf476ff16ab8"
    }
    params = {
        "disease_name": disease_name
    }
    
    response = requests.get(rapidapi_url, headers=headers, params=params)
    
    if response.status_code == 200:
        recommendations = response.json()
        return recommendations
    else:
        return None

# Main function to run the program
def main():
    image_path = "path_to_your_skin_image.jpg"
    
    # Detect skin disease
    skin_disease_results = detect_skin_disease(image_path)
    
    if skin_disease_results:
        disease_name = skin_disease_results.get("disease")
        
        # Get recommendations based on the detected disease
        recommendations = get_skin_disease_recommendations(disease_name)
        
        if recommendations:
            print("Detected Skin Disease:", disease_name)
            print("Recommendations:")
            for recommendation in recommendations:
                print("-", recommendation)
        else:
            print("Failed to fetch recommendations.")
    else:
        print("Skin disease detection failed.")

if __name__ == "__main__":
    main()